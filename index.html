<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ヴィジュネル暗号解読実験</title>
    <link rel="stylesheet" href="style.css"> 
</head>
<body>

    <main>
        <h1>ヴィジュネル暗号解読実験</h1>

        <section id="start-screen">
            
            <h2>実験のルールと心構え</h2>
            <div style="background: #eef; border: 1px solid #ccd; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                <p>この実験では、暗号化された文章を解読していただきます。</p>
                <p><strong>[暗号の基本]</strong>: 文章は、アルファベットを一定のルールで「ずらす」ことによって暗号化されています。</p>
                <p><strong>[暗号の種類]</strong>: この暗号は**ヴィジュネル暗号**です。短い「鍵」を使って、文字をずらす量が周期的に変化します。</p>
                <p>これは知識のテストではなく、**ロジックとパズル**です。解読に必要な鍵と元の文章（平文）をフォームに入力してください。</p>
                <p style="font-weight: bold; color: red;">ヒントとツールは利用できますが、その使用は記録されます。</p>
            </div>
            <button id="start-button">実験を開始する</button>
        </section>

        <section id="experiment-screen" style="display: none;">

            <h2>暗号文:</h2>
            <div id="ciphertext-display">暗号文を生成中...</div>

            <div class="hint-area" style="margin-top: 20px; margin-bottom: 20px;">
                <button id="hint-button-1">ヒント 1 (暗号の種類)</button>
                <button id="hint-button-2" style="display: none;">ヒント 2 (解読手順)</button>
                
                <button id="frequency-tool-button">📊 頻度分析ツール</button>
                <button id="decryption-tool-button">🔓 復号化ツール</button>
            </div>
            
            <p id="hint-display-1" style="color: #0056b3; font-weight: bold; display: none;"></p>
            <p id="hint-display-2" style="color: #0056b3; font-weight: bold; display: none;"></p>
            
            <hr>

            <div id="decryption-interface">
                <h2>あなたの解読結果</h2>
                <label for="key-input">鍵:</label>
                <input type="text" id="key-input" placeholder="例: CIPHER (アルファベットのみ)">

                <label for="plaintext-input">元の文章（平文）:</label>
                <textarea id="plaintext-input" rows="5" placeholder="解読した元の文章をすべて大文字で入力してください (アルファベットのみ)"></textarea>

                <div style="margin-top: 15px;">
                    <button id="submit-button">結果を提出し、チェック</button>
                    <button id="giveup-button" class="secondary-button">ギブアップ</button>
                </div>
                
                <p id="message-area" style="margin-top: 10px; font-size: 1.1em; font-weight: bold; color: #d35400;"></p>
            </div>
        </section>

        <section id="survey-screen" style="display: none;">
            <h2>実験終了：アンケートとデータ送信</h2>

            <div class="survey-form">
                <h3>1. 暗号解読の経験</h3>
                <p>この実験以前に、ヴィジュネル暗号やその他の暗号解読の経験はありますか？</p>
                <label><input type="radio" name="knowledge" value="NONE" checked> 全くない</label>
                <label><input type="radio" name="knowledge" value="LITTLE"> 少しある（パズル程度）</label>
                <label><input type="radio" name="knowledge" value="MUCH"> 詳しい知識がある</label>
                
                <h3>2. 実験の楽しさ</h3>
                <p>この暗号解読タスクは楽しめましたか？</p>
                <label><input type="radio" name="enjoyment" value="LOW"> あまり楽しくなかった</label>
                <label><input type="radio" name="enjoyment" value="MEDIUM"> どちらでもない</label>
                <label><input type="radio" name="enjoyment" value="HIGH" checked> 非常に楽しめた</label>
            </div>
            
            <hr>
            
            <button id="send-data-button">研究データを送信する</button>
            <p id="data-status" style="margin-top: 10px; font-weight: bold;"></p>

        </section>
    </main>

    <script src="script.js"></script>
</body>
</html>